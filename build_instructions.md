# Процесс сборки драйвера Intel i219-v с игровыми оптимизациями

## Подготовка к сборке

Для сборки драйвера необходимо выполнить следующие шаги:

1. Подготовить все исходные файлы
2. Создать структуру проекта для сборки
3. Настроить параметры сборки
4. Выполнить компиляцию
5. Подписать драйвер
6. Создать установочный пакет

## Структура проекта

```
gaming_driver_project/
├── src/                      # Исходный код драйвера
│   ├── Driver.c              # Основной файл драйвера
│   ├── Driver.h              # Заголовочный файл драйвера
│   ├── Device.c              # Файл устройства
│   ├── Device.h              # Заголовочный файл устройства
│   ├── Adapter.c             # Файл адаптера
│   ├── Adapter.h             # Заголовочный файл адаптера
│   ├── Queue.c               # Файл очередей
│   ├── Queue.h               # Заголовочный файл очередей
│   ├── i219v_hw.c            # Файл аппаратной части
│   ├── i219v_hw.h            # Заголовочный файл аппаратной части
│   ├── i219v_hw_extended.h   # Расширенный заголовочный файл аппаратной части
│   ├── i219v_gaming.c        # Файл игровых оптимизаций
│   ├── i219v_gaming.h        # Заголовочный файл игровых оптимизаций
│   ├── DeviceContext.h       # Заголовочный файл контекста устройства
│   ├── Trace.h               # Заголовочный файл трассировки
│   ├── I219v.inf             # Информационный файл драйвера
│   └── I219v.vcxproj         # Файл проекта Visual Studio
├── build/                    # Каталог сборки
│   ├── x64/                  # Каталог для 64-битной версии
│   │   └── Release/          # Каталог для релизной версии
│   └── x86/                  # Каталог для 32-битной версии
│       └── Release/          # Каталог для релизной версии
└── docs/                     # Документация
    ├── installation_guide.md # Руководство по установке
    └── optimization_guide.md # Руководство по оптимизации
```

## Процесс сборки

### 1. Компиляция драйвера

В среде Windows с установленными Visual Studio, WDK и SDK:

```batch
cd gaming_driver_project
msbuild I219v.vcxproj /p:Configuration=Release /p:Platform=x64
```

### 2. Создание каталога драйвера

```batch
cd build\x64\Release
Inf2Cat.exe /driver:. /os:10_X64,10_X86,11_X64,11_X86
```

### 3. Подписание драйвера

```batch
SignTool.exe sign /v /n "Имя сертификата" /t http://timestamp.digicert.com I219v.cat
```

### 4. Создание установочного пакета

```batch
mkdir I219v_Gaming_Driver
copy I219v.sys I219v_Gaming_Driver\
copy I219v.inf I219v_Gaming_Driver\
copy I219v.cat I219v_Gaming_Driver\
copy ..\..\docs\*.md I219v_Gaming_Driver\
```

## Результаты сборки

После успешной сборки в каталоге `build\x64\Release\I219v_Gaming_Driver` будут находиться следующие файлы:

- `I219v.sys` - Файл драйвера
- `I219v.inf` - Информационный файл
- `I219v.cat` - Каталог драйвера (подписанный)
- `installation_guide.md` - Руководство по установке
- `optimization_guide.md` - Руководство по оптимизации

## Проверка подписи драйвера

Для проверки подписи драйвера выполните:

```batch
SignTool.exe verify /v /pa I219v.cat
```

## Подготовка к установке

1. Скопируйте содержимое каталога `I219v_Gaming_Driver` на компьютер пользователя
2. Следуйте инструкциям в файле `installation_guide.md` для установки драйвера
3. После установки используйте рекомендации из файла `optimization_guide.md` для настройки оптимальной производительности

## Примечания

- Для установки драйвера в Windows 11 требуется подпись сертификатом, доверенным Microsoft
- Для тестирования можно использовать режим тестовой подписи Windows
- Перед установкой рекомендуется создать точку восстановления системы
